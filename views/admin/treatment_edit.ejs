<%- include("navbar.ejs") %>

<div class="container p-3">
  <div class="card shadow-sm mx-auto" style="max-width: 1000px;">
    <!-- <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
      <h5 class="mb-0">Edit Treatment</h5>
      <a href="/admin/treatment" class="btn btn-light btn-sm">Cancel</a>
    </div> -->

    <div class="card-body">
      <form action="/admin/treatment_update/<%= treatment.treatment_id %>" 
            method="POST" 
            enctype="multipart/form-data">

        <!-- Row 1: Title + Short Description -->
        <div class="row mb-3">
          <div class="col-md-6">
            <label class="form-label">Title</label>
            <input
              type="text"
              name="treatment_title"
              class="form-control"
              value="<%= treatment.treatment_title %>"
              required
            >
          </div>

          <div class="col-md-6">
            <label class="form-label">Short Description</label>
            <input
              type="text"
              name="treatment_short"
              class="form-control"
              value="<%= treatment.treatment_short %>"
              required
            >
          </div>
        </div>

        <!-- Row 2: Current Image + Change Image -->
        <div class="row mb-3">
          <div class="col-md-6">
            <label class="form-label">Current Image</label><br>
            <img src="/uploads/<%= treatment.treatment_image %>" width="120" class="img-thumbnail">
          </div>

          <div class="col-md-6">
            <label class="form-label">Change Image</label>
            <input type="file" name="treatment_image" class="form-control" accept="image/*">
          </div>
        </div>

        <!-- Icon -->
        <div class="mb-3">
          <label class="form-label">Icon</label>
          <input
            type="text"
            name="treatment_icon"
            class="form-control"
            value="<%= treatment.treatment_icon %>"
            placeholder='<i class="fas fa-dna"></i>'
          >
          <small class="text-muted">Use Font Awesome icons, e.g., &lt;i class="fas fa-dna"&gt;&lt;/i&gt;</small>
        </div>

        <!-- Long Description -->
        <div class="mb-3">
          <label class="form-label">Long Description</label>
          <textarea
            id="treatment_long"
            name="treatment_long"
            class="form-control"
            rows="6"
            required
          ><%- treatment.treatment_long %></textarea>
        </div>

        <!-- Submit + Cancel -->
        <div class="d-flex justify-content-end">
          <a href="/admin/treatment" class="btn btn-secondary me-2">Cancel</a>
          <button type="submit" class="btn btn-success">
            <i class="fas fa-save me-1"></i> Update Treatment
          </button>
        </div>

      </form>
    </div>
  </div>
</div>

<!-- CKEditor 5 -->
<script src="https://cdn.ckeditor.com/ckeditor5/39.0.1/classic/ckeditor.js"></script>
<script>
  ClassicEditor
    .create(document.querySelector('#treatment_long'), {
      toolbar: [
        'heading', '|',
        'bold', 'italic', 'underline', 'strikethrough', '|',
        'bulletedList', 'numberedList', '|',
        'link', 'blockQuote', 'undo', 'redo'
      ]
    })
    .then(editor => {
      console.log('CKEditor ready', editor);
    })
    .catch(error => {
      console.error(error);
    });
</script>

<%- include("footer.ejs") %>
