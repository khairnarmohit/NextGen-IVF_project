<%- include("navbar.ejs") %>

<style>
  :root {
    --primary: #1E88E5;
    --border: #dee2e6;
    --bg-light: #f8f9fa;
    --text-muted: #6c757d;
    --radius: 10px;
  }

  body {
    font-family: 'Roboto', sans-serif;
    overflow: hidden;
  }

  .appointment-section {
    padding: 60px 0;
    /* background: #ffffff; */
    min-height: calc(100vh - 160px);
  }

  .appointment-wrapper {
    max-width: 720px;
    margin: auto;
  }

  .appointment-title {
    font-size: 2rem;
    font-weight: 600;
    color: var(--primary);
    text-align: center;
    margin-bottom: 10px;
  }

  .appointment-subtitle {
    text-align: center;
    color: var(--text-muted);
    margin-bottom: 30px;
    font-size: 0.95rem;
  }

  .appointment-form {
    /* background: var(--bg-light); */
    padding: 30px;
    border-radius: var(--radius);
    /* border: 1px solid var(--border); */
  }

  .form-label {
    font-weight: 500;
    font-size: 0.9rem;
    margin-bottom: 6px;
  }

  .form-control,
  .form-select {
    border-radius: var(--radius);
    padding: 0.75rem 1rem;
    /* border: 1px solid var(--border); */
    font-size: 0.95rem;
  }

  .form-control:focus,
  .form-select:focus {
    border-color: var(--primary);
    box-shadow: none;
  }

  .btn-appointment {
    background: var(--primary);
    color: #fff;
    border: none;
    border-radius: var(--radius);
    padding: 0.75rem;
    font-weight: 500;
    /* width: 100%; */
  }

  .btn-appointment:hover {
    background: #1565c0;
    color: #fff;
  }

  .success-message {
    background: #e6f4ea;
    color: #1e7e34;
    padding: 10px;
    border-radius: var(--radius);
    margin-top: 15px;
    display: none;
    font-size: 0.9rem;
  }
</style>


    <section class="appointment-section" aria-label="Appointment Booking">
        <div class="container">
            <div class="row align-items-center g-5 g-lg-4">

                <!-- LEFT FORM -->
                <div class="col-md-12 order-2 order-lg-1">
                    <h2 class="appointment-title">
                        Book Your Appointment Today!
                    </h2>
                    <!-- <p class="appointment-subtitle">
                        Schedule your consultation with our expert team. We'll get back to you within 24 hours.
                    </p> -->

                    <form class="appointment-form" id="appointmentForm" style="margin-top:-50px;" action="/admin/appointment-save" method="POST">
                        <div class="row g-3 g-md-4">
                            <div class="col-md-12">
                                <label for="patient_fullname" class="form-label">Full Name</label>
                                <input type="text" class="form-control" name="patient_fullname" id="patient_fullname" placeholder="Enter Full Name" required>
                            </div>
                            <div class="col-md-6">
                                <label for="patient_email" class="form-label">Email Address</label>
                                <input type="email" class="form-control" name="patient_email" id="patient_email" placeholder="example@gmail.com" required>
                            </div>
                            <div class="col-md-6">
                                <label for="patient_mobile" class="form-label">Phone Number</label>
                                <input type="tel" class="form-control" name="patient_mobile" pattern="[0-9]{10}" id="patient_mobile"
                                    placeholder="1234567890" required>
                            </div>
                            <div class="col-md-6">
                                <label for="patient_gender" class="form-label">Gender</label>
                                <select class="form-select" name="patient_gender" id="patient_gender" required>
                                    <option value="">Select Gender</option>
                                    <option value="male">Male</option>
                                    <option value="female">Female</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="patient_age" class="form-label">Age</label>
                                <input type="number" class="form-control" name="patient_age" id="patient_age" min="18" max="45"
                                    placeholder="Enter Age" required>
                            </div>
                            <div class="col-md-6">
                                <label for="doctor_id" class="form-label">Select Doctor</label>
                            <select class="form-select" name="doctor_id">
                            <!-- <option value="">Select Doctor</option> -->

                            <optgroup label="Our Doctors">
                                <% for(let i=0;i<doctors.length;i++){ %>
                                <option value="d-<%= doctors[i].doctor_id %>">
                                    <%= doctors[i].doctor_name %>
                                </option>
                                <% } %>
                            </optgroup>

                            <optgroup label="Visiting Doctors">
                                <% for(let i=0;i<visitingDoctors.length;i++){ %>
                                <option value="v-<%= visitingDoctors[i].visitor_doctor_id %>">
                                    <%= visitingDoctors[i].visitor_doctor_name %>
                                </option>
                                <% } %>
                            </optgroup>
                            </select>
                            </div>



                            <% const today=new Date(); const minDate=today.toISOString().split('T')[0]; const
                                maxDate=new Date(); maxDate.setDate(today.getDate() + 30); const
                                maxDateStr=maxDate.toISOString().split('T')[0]; %>

                                <div class="col-md-6">
                                    <label for="appointment_date" class="form-label">Preferred Date</label>
                                    <input type="date" class="form-control" name="appointment_date" id="appointment_date" min="<%= minDate %>"
                                    max="<%= maxDateStr %>" required>
                                </div>

                                <div class="col-12 mt-4 text-center">
                                    <button type="submit" class="btn btn-appointment w-25" id="submitBtn">
                                        <span id="buttonText">Book An Appointment <i class="fas fa-calendar-check me-2"></i></span>
                                        <span id="buttonSpinner" class="loading" style="display: none;"></span>
                                    </button>
                                    <div class="success-message" id="successMessage">
                                        <i class="bi bi-check-circle-fill me-2"></i>
                                        Thank you! Your appointment request has been submitted. We'll contact you
                                        shortly.
                                    </div>
                                </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>



    <%- include("footer.ejs") %>