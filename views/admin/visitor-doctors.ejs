<%- include('navbar.ejs') %>

<div class="container py-4">

  <!-- Add Button -->
  <div class="mb-3">
    <button
      class="btn btn-primary"
      data-bs-toggle="collapse"
      data-bs-target="#addVisitorDoctorForm"
    >
      <i class="fas fa-plus me-1"></i> Add Visiting Doctor
    </button>
  </div>

  <!-- Collapse Form -->
  <div class="collapse" id="addVisitorDoctorForm">
    <div class="card shadow-sm border-0">
      <div class="card-header bg-primary text-white">
        <h5 class="mb-0">Add Visiting Doctor</h5>
      </div>

      <div class="card-body">
        <form
          action="/admin/visitor_doctor_save"
          method="POST"
          enctype="multipart/form-data"
        >

          <!-- Row 1 -->
          <div class="row mb-3">
            <div class="col-md-6">
              <label class="form-label">Doctor Name</label>
              <input
                type="text"
                name="visitor_doctor_name"
                class="form-control"
                placeholder="Visitor Doctor Name"
                required
              >
            </div>

            <div class="col-md-6">
              <label class="form-label">Qualification</label>
              <input
                type="text"
                name="visitor_doctor_qual"
                class="form-control"
                placeholder="MBBS, MD (Obs & Gyn)"
                required
              >
            </div>
          </div>

          <!-- Row 2 -->
          <div class="row mb-3">
            <div class="col-md-6">
              <label class="form-label">Visiting Date</label>
              <input
                type="text"
                name="visitor_doctor_date"
                class="form-control"
                placeholder="11th, 18th of every month"
                required
              >
            </div>

            <div class="col-md-6">
              <label class="form-label">Visiting Time</label>
              <input
                type="text"
                name="visitor_doctor_time"
                class="form-control"
                placeholder="10:00 AM â€“ 2:00 PM"
                required
              >
            </div>
          </div>

          <!-- Doctor Photo -->
          <div class="mb-3">
            <label class="form-label">Doctor Photo</label>
            <input
              type="file"
              name="visitor_doctor_photo"
              class="form-control"
              accept="image/*"
              required
            >
          </div>

          <!-- Submit -->
          <div class="text-end">
            <button type="submit" class="btn btn-success px-4">
              <i class="fas fa-save me-1"></i> Save Visiting Doctor
            </button>
          </div>

        </form>
      </div>
    </div>
  </div>
</div>


<div class="container py-4">

  <div class="card shadow-sm border-0">
    <div class="card-header bg-primary text-white">
      <h5 class="mb-0">Visiting Doctors List</h5>
    </div>

    <div class="card-body table-responsive">
      <table class="table table-bordered table-hover align-middle">
        <thead class="table-light text-center">
          <tr>
            <th>#</th>
            <th>Photo</th>
            <th>Name</th>
            <th>Qualification</th>
            <th>Visiting Date</th>
            <th>Visiting Time</th>
            <th>Action</th>
          </tr>
        </thead>

        <tbody>
          <% if (visitorDoctors && visitorDoctors.length > 0) { %>
            <% for (let i = 0; i < visitorDoctors.length; i++) { %>
              <tr class="text-center">
                <td><%= i + 1 %></td>

                <td>
                  <img
                    src="/uploads/<%= visitorDoctors[i].visitor_doctor_photo %>"
                    width="80"
                    height="80"
                    class="border"
                  >
                </td>

                <td><%= visitorDoctors[i].visitor_doctor_name %></td>

                <td><%= visitorDoctors[i].visitor_doctor_qual %></td>

                <td>
                  <%= visitorDoctors[i].visitor_doctor_date %>
                </td>

                <td>
                  <%= visitorDoctors[i].visitor_doctor_time %>
                </td>

                <td>
                  <a
                    href="/admin/visitor-doctor-edit/<%= visitorDoctors[i].visitor_doctor_id %>"
                    class="btn btn-sm btn-warning"
                  >
                    <i class="fas fa-edit"></i>
                  </a>

                  <a
                    href="/admin/visitor_doctor_delete/<%= visitorDoctors[i].visitor_doctor_id %>"
                    class="btn btn-sm btn-danger"
                    onclick="return confirm('Are you sure?')"
                  >
                    <i class="fas fa-trash"></i>
                  </a>
                </td>
              </tr>
            <% } %>
          <% } else { %>
            <tr>
              <td colspan="7" class="text-center text-muted">
                No visiting doctors found
              </td>
            </tr>
          <% } %>
        </tbody>
      </table>
    </div>
  </div>

</div>



<%- include('footer.ejs') %>